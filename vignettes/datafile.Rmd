---
title: "datafile"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{datafile}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(datafile)
```

# Introduction

The datafile package is build around the philosophy that data should
be seperated from code. This means that data is always written to a
different location (directory) than your current working directory.

The data directory must be given as relative path to you current
working directory, e.g. ../../data or ./data. If you use absolute
paths, e.g. /home/user/project/data, your code won't be portable.
Relative paths are easily created using the `here` package, this
packagage builds on top of that.

To save you from the hassle of creating a data directory or to type
the data directory filepath over and over again, the datafile package
contains some convienient functions. 

# Usage


Let's give an example:

```{r}

datafileInit() 
x<-rnorm(10)
saveRDS(x,datafile("x.rds"))

```

In this example we create a datadirectory using `datafileInit()` under
the current working directory. Then we created some variable `x`. And
using saveRDS and datafile we save it to disk. The final RDS file is
now saved to `./data/x.rds`. To retrieve the rds file, we use:

```{r}
x<-readRDS(datafile("x.rds"))
```

If even `datafile` is to much typing for you, you can use the alias
`dfn()`

```{r}
x<-readRDS(dfn("x.rds"))

```

Now let's assume you want to store your data in a temporary directory,
for hatever reasons, in that case the above example looks like this:


```{r}

datafileInit(basedir=tempdir()) 
x<-rnorm(10)
saveRDS(x,datafile("x.rds"))

# read it back:
x<-readRDS(datafile("x.rds"))

```

The only things that is changed, is the location of the base
directory. Datafile expands your filenames to the right directory.

```{r}
unlink("./data/",recursive=TRUE)
```

